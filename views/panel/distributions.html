{{ define "distributions" }}
<div class="overflow-auto">
  <table class="striped">
    <thead>
      <tr>
        <th><input type="number" style="all:unset;font-weight:normal;" placeholder="ID"      onkeyup="filterTable(this)"></th>
        <th><input type="number" style="all:unset;font-weight:normal;" placeholder="Periodo" onkeyup="filterTable(this)"></th>
        <th><input type="number" style="all:unset;font-weight:normal;" placeholder="Cuenta"  onkeyup="filterTable(this)"></th>
        <th><input type="text"   style="all:unset;font-weight:normal;" placeholder="Partida" onkeyup="filterTable(this)"></th>
        <th><input type="text" filter="number" inputmode="numeric" style="all:unset;font-weight:normal;" placeholder="Monto" onkeyup="filterTable(this)"></th>
        <th>Activa</th>
      </tr>
    </thead>
    <tbody id="distribution-rows">
      {{ range .Distributions }}
      {{ template "distribution" . }}
      {{ end }}
    </tbody>
  </table>
</div>
<label for="adddist">Agregar Distribución</label>
<form
  id="adddist"
  method="POST"
  action="/panel/dist/add"
>
  <select name="period">
    <option value="" selected disabled>Período</option>
    {{ range .Periods }}
    <option value="{{ .PeriodID }}">{{ .PeriodName }}</option>
    {{ end }}
  </select>
  <select name="account">
    <option value="" selected disabled>Cuenta</option>
    {{ range .Accounts }}
    <option value="{{ .AccountID }}">[{{ .AccountAbbr }}] {{ .AccountName }}</option>
    {{ end }}
  </select>
  <select name="entry">
    <option value="" selected disabled>Partida</option>
    {{ range .BudgetEntries }}
    <option value="{{ .EntryID }}">[{{ .EntryCode }}] {{ .EntryObject }}</option>
    {{ end }}
  </select>
  <input type="number" name="amount"  placeholder="Monto"   aria-label="Monto"   required>
  <button
    type="submit"
    onclick="fetchAndSwap(event)"
    target="#distribution-rows"
    swap="beforeend"
    loading-state
  >Agregar Distribución</button>
</form>
{{ range .Distributions }}
<dialog id="modal-dist-{{ .DistID }}">
  <article>
    <header>
      <button rel="prev" type="button" onclick="toggleModal('modal-dist-{{ .DistID }}')"></button>
      <h3>Editar Distribución #{{ .DistID }}</h3>
    </header>
    {{ template "dist-update-form" . }}
  </article>
</dialog>
{{ end }}
{{ end }}
